-# When rendering inside rails_email_preview hide nav, and hide irrelevant things from the form
javascript:
  jQuery(function($) {
    if (window.parent && /email/.test(parent.location.href)) {
      // Hide nav:
      $('.left-column,.right-column').hide();
      $('.center-column').css('margin', 0);

      // Snippet form:
      var control = function(name) { return $('[name^="snippet[' + name + ']"]').closest('.control-group'); };

      // retext labels
      control('label').find('.control-label').text("Subject");
      control('content').find('.control-label').text("Body");

      // hide identifier and categories
      control('identifier').hide();
      control('category_ids').hide()

      // Do not mess with identifier
      $('[data-slug]').removeAttr('data-slug');
    }
  });
